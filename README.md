
# Telegram News Autoposter (Render Worker)

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –±–æ—Ç: —Å–æ–±–∏—Ä–∞–µ—Ç –Ω–æ–≤–æ—Å—Ç–∏ (banki.ru + –†–ò–ê –≠–∫–æ–Ω–æ–º–∏–∫–∞), –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç, –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç –ò–ò, –ø–æ—Å—Ç–∏—Ç –≤ Telegram-–∫–∞–Ω–∞–ª. –ó–∞–ø—É—Å–∫ 24/7 –Ω–∞ Render (Worker).

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –Ω–∞ Render

1) **–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –≤ –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∫–Ω–æ–ø–∫–∞ "Add file" ‚Üí "Upload files").

2) **–°–æ–∑–¥–∞–π—Ç–µ Worker –Ω–∞ Render**
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://render.com ‚Üí New + ‚Üí **Background Worker**.
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å —ç—Ç–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º.
- Build Command: `pip install -r requirements.txt`
- Start Command: `python -m app.bot`
- Environment: Python 3

3) **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
–î–æ–±–∞–≤—å—Ç–µ –≤ Render ‚Üí *Environment*:
- `TELEGRAM_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –æ—Ç @BotFather
- `CHANNEL_ID` ‚Äî `@–∏–º—è_–≤–∞—à–µ–≥–æ_–∫–∞–Ω–∞–ª–∞`
- `OPENAI_API_KEY` ‚Äî –≤–∞—à –∫–ª—é—á –æ—Ç OpenAI
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `OPENAI_MODEL` ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `gpt-4o-mini`
- `CHECK_INTERVAL` ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `1200` = 20 –º–∏–Ω—É—Ç)
- `DB_PATH` ‚Äî –ø—É—Ç—å –∫ –±–∞–∑–µ, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è `/data/state.db`
- `LOG_LEVEL` ‚Äî `INFO`

4) **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π –¥–∏—Å–∫**
- –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Ä–≤–∏—Å–∞ –¥–æ–±–∞–≤—å—Ç–µ **Disk** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1 GB) –∏ —Å–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤ `/data`.
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `DB_PATH=/data/state.db`, —á—Ç–æ–±—ã –±–æ—Ç –Ω–µ —Ç–µ—Ä—è–ª –∏—Å—Ç–æ—Ä–∏—é —Å—Å—ã–ª–æ–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ö.

5) **–î–µ–ø–ª–æ–π**
- –ù–∞–∂–º–∏—Ç–µ **Deploy**. –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö, –∫–∞–∫ –±–æ—Ç —Å—Ç–∞—Ä—Ç—É–µ—Ç –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –Ω–æ–≤—ã–µ –ø–æ—Å—Ç—ã.

---

## üîß –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–¥–ª—è —Ç–µ—Å—Ç–æ–≤)

```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt

cp .env.template .env
# –æ—Ç–∫—Ä–æ–π—Ç–µ .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è

export $(grep -v '^#' .env | xargs)  # Windows: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ set –ø–æ –æ–¥–Ω–æ–º—É –∫–ª—é—á—É
python -m app.bot
```

---

## üìå –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏**: `banki.ru/news` (–ø–∞—Ä—Å–∏–º HTML, –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤) –∏ RSS `–†–ò–ê –≠–∫–æ–Ω–æ–º–∏–∫–∞`.
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞**: –±–µ—Ä—ë–º HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–æ–≤–æ—Å—Ç–∏ –∏ —á–∏—Å—Ç–∏–º —Å –ø–æ–º–æ—â—å—é `readability-lxml`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç.
- **–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ**: –ø–µ—Ä–µ–¥–∞—ë–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ + —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞ –≤ –ò–ò (OpenAI), –ø–æ–ª—É—á–∞–µ–º –∫–æ—Ä–æ—Ç–∫–∏–π, –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è Telegram.
- **–ü—É–±–ª–∏–∫–∞—Ü–∏—è**: –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≥–æ—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç –≤ –∫–∞–Ω–∞–ª —á–µ—Ä–µ–∑ Telegram Bot API.
- **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è**: —Å—Å—ã–ª–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ SQLite –±–∞–∑–µ (`DB_PATH`), —á—Ç–æ–±—ã –Ω–µ –ø–æ—Å—Ç–∏—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ.

---

## üß© –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ —Å–µ–±—è

- –î–æ–±–∞–≤–∏—Ç—å/—É–±—Ä–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –º–æ–∂–Ω–æ –≤ `app/news.py` (–º–∞—Å—Å–∏–≤ `SOURCES`). –ú–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å RSS –¥—Ä—É–≥–∏—Ö —Å–∞–π—Ç–æ–≤.
- –§–æ—Ä–º–∞—Ç –ø–æ—Å—Ç–∞ –∏ —Å—Ç–∏–ª—å –ø—Ä–∞–≤—è—Ç—Å—è –≤ `app/rewrite.py` (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `SYSTEM_PROMPT`).

---

## ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í–µ—Ä—Å—Ç–∫–∞ —Å–∞–π—Ç–æ–≤ –º–µ–Ω—è–µ—Ç—Å—è. –ï—Å–ª–∏ –ø–∞—Ä—Å–µ—Ä –¥–ª—è banki.ru –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å —Å—Å—ã–ª–∫–∏, –æ–±–Ω–æ–≤–∏—Ç–µ CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä –≤ `SOURCES` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ RSS –ª–µ–Ω—Ç—É, –µ—Å–ª–∏ —É–¥–æ–±–Ω–µ–µ.
- –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π –¥–∏—Å–∫ –Ω–∞ Render (–∏–Ω–∞—á–µ –ø—Ä–∏ –ø–µ—Ä–µ—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –∏—Å—Ç–æ—Ä–∏—è —Å—Å—ã–ª–æ–∫ –ø—Ä–æ–ø–∞–¥—ë—Ç).
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ä–∞—Å—Ö–æ–¥–∞–º–∏ OpenAI API: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞–∑—É–º–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª `CHECK_INTERVAL` –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏.
